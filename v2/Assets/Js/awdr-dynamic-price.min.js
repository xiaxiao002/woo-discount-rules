!function($){$.extend({AdvanceWooDiscountRules:{form:null,product_id:null,quantity:0,options:[],target:null,getDynamicDiscountPriceFromCartForm:function(a,b,c){void 0!==c&&(this.options=c),void 0!==b&&(this.target=b),void 0!==a&&a.is("form")?this.form=a:this.logError("Incorrect form provided"),this.product_id=this.getProductIdFromForm(),this.quantity=this.getProductQuantityFromForm(),this.getDiscountPriceForProduct()},getDiscountPriceForProduct:function(){if(null===this.product_id||0==this.product_id)return this.logError("Invalid product"),[];var a={action:"awdr_get_product_discount",product_id:this.product_id,qty:this.quantity,awdr_nonce:awdr_params.nonce};void 0!==this.options.custom_price&&(a.custom_price=this.options.custom_price);var b=this.target,c=this.options;$.ajax({url:awdr_params.ajaxurl,data:a,type:"POST",success:function(a){$(document.body).trigger("advanced_woo_discount_rules_on_get_response_for_dynamic_discount",[a,b,c])},error:function(a){}})},getProductIdFromForm:function(){var a=this.form.find('[name="variation_id"]'),b=this.form.find('[name="add-to-cart"]');return a.length?parseInt(a.val()):!!b.length&&parseInt(b.val())},getProductQuantityFromForm:function(){var a=this.form.find('input[name="quantity"]');return 0===a.length?0:a.val()},logError:function(a){console.error("Advance discount rule error: %s",a)}}})}(jQuery)